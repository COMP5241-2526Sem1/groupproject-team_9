# Pollæ´»åŠ¨ä¿®å¤éªŒè¯æŒ‡å—

## é—®é¢˜æè¿°
è€å¸ˆåˆ›å»ºpollæ´»åŠ¨åï¼Œå­¦ç”Ÿå‚ä¸æ—¶session statusæ— ååº”çš„é—®é¢˜ã€‚

## ä¿®å¤å†…å®¹

### 1. æ•°æ®ç»“æ„å…¼å®¹æ€§ä¿®å¤
- **æ–°pollæ´»åŠ¨**ï¼šä½¿ç”¨`content.options`æ•°ç»„ç»“æ„
- **æ—§pollæ´»åŠ¨**ï¼šå…¼å®¹`content.questions`ç»“æ„
- **å­¦ç”Ÿå‚ä¸é¡µé¢**ï¼šåŒæ—¶æ”¯æŒæ–°æ—§ä¸¤ç§æ•°æ®ç»“æ„

### 2. è°ƒè¯•ä¿¡æ¯æ·»åŠ 
- åœ¨å…³é”®ä½ç½®æ·»åŠ äº†console.logè°ƒè¯•ä¿¡æ¯
- å¸®åŠ©è¯Šæ–­socketè¿æ¥å’ŒsessionçŠ¶æ€æ›´æ–°é—®é¢˜

## éªŒè¯æ­¥éª¤

### æ­¥éª¤1ï¼šé‡å¯æœåŠ¡
```bash
# åœæ­¢å½“å‰æœåŠ¡
# é‡å¯å¼€å‘æœåŠ¡å™¨
npm run dev
# é‡å¯socketæœåŠ¡å™¨
node server.js
```

### æ­¥éª¤2ï¼šåˆ›å»ºæ–°çš„Pollæ´»åŠ¨
1. ä»¥è€å¸ˆèº«ä»½ç™»å½•
2. åˆ›å»ºæ–°çš„Pollæ´»åŠ¨
3. æ·»åŠ pollé—®é¢˜å’Œé€‰é¡¹
4. ä¿å­˜æ´»åŠ¨

### æ­¥éª¤3ï¼šæµ‹è¯•å­¦ç”Ÿå‚ä¸
1. ä»¥å­¦ç”Ÿèº«ä»½ç™»å½•
2. è¿›å…¥pollæ´»åŠ¨å‚ä¸é¡µé¢
3. æ£€æŸ¥æ˜¯å¦èƒ½çœ‹åˆ°pollé€‰é¡¹
4. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„è°ƒè¯•ä¿¡æ¯

### æ­¥éª¤4ï¼šæµ‹è¯•SessionçŠ¶æ€
1. è€å¸ˆå¯åŠ¨pollæ´»åŠ¨session
2. å­¦ç”Ÿå‚ä¸é¡µé¢åº”è¯¥æ˜¾ç¤ºsessionçŠ¶æ€æ›´æ–°
3. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰sessionçŠ¶æ€æ—¥å¿—

## è°ƒè¯•ä¿¡æ¯è¯´æ˜

### å­¦ç”Ÿå‚ä¸é¡µé¢æ§åˆ¶å°æ—¥å¿—
- `ğŸ”Œ Socket available, connection status: true` - Socketè¿æ¥çŠ¶æ€
- `âœ… Socket connected, joining activity: [activityId]` - æˆåŠŸåŠ å…¥æ´»åŠ¨
- `ğŸ” Requesting session status for activity: [activityId]` - è¯·æ±‚sessionçŠ¶æ€
- `ğŸ“Š Session updated: [sessionData]` - æ”¶åˆ°sessionçŠ¶æ€æ›´æ–°

### æœåŠ¡å™¨æ§åˆ¶å°æ—¥å¿—
- `ğŸ” Getting session status for activity [activityId]` - æ”¶åˆ°sessionçŠ¶æ€è¯·æ±‚
- `ğŸ“Š Found existing session: [sessionData]` - æ‰¾åˆ°ç°æœ‰session
- `â³ Created waiting session: [sessionData]` - åˆ›å»ºç­‰å¾…session

## é¢„æœŸç»“æœ

### ä¿®å¤å‰
- å­¦ç”Ÿå‚ä¸é¡µé¢æ˜¾ç¤º"No poll options available"
- Session statuså§‹ç»ˆä¸º"waiting"
- æ— æ³•æäº¤å“åº”

### ä¿®å¤å
- å­¦ç”Ÿå‚ä¸é¡µé¢æ­£ç¡®æ˜¾ç¤ºpollé€‰é¡¹
- Session statusèƒ½å¤Ÿæ­£ç¡®æ›´æ–°ï¼ˆwaiting â†’ active â†’ completedï¼‰
- èƒ½å¤ŸæˆåŠŸæäº¤å“åº”

## æ•…éšœæ’é™¤

### å¦‚æœä»ç„¶æ²¡æœ‰å˜åŒ–
1. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**ï¼šç¡¬åˆ·æ–°é¡µé¢ï¼ˆCtrl+F5ï¼‰
2. **æ£€æŸ¥æ§åˆ¶å°é”™è¯¯**ï¼šæŸ¥çœ‹æ˜¯å¦æœ‰JavaScripté”™è¯¯
3. **éªŒè¯Socketè¿æ¥**ï¼šæ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰è¿æ¥æˆåŠŸæ—¥å¿—
4. **é‡å¯æ‰€æœ‰æœåŠ¡**ï¼šç¡®ä¿ä»£ç æ›´æ”¹ç”Ÿæ•ˆ

### å¸¸è§é—®é¢˜
1. **Socketè¿æ¥å¤±è´¥**ï¼šæ£€æŸ¥server.jsæ˜¯å¦è¿è¡Œåœ¨æ­£ç¡®ç«¯å£
2. **æ•°æ®ç»“æ„ä¸åŒ¹é…**ï¼šæ£€æŸ¥ç°æœ‰pollæ´»åŠ¨æ˜¯å¦ä½¿ç”¨æ—§ç»“æ„
3. **ç¼“å­˜é—®é¢˜**ï¼šæ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–ä½¿ç”¨æ— ç—•æ¨¡å¼

## æŠ€æœ¯ç»†èŠ‚

### æ•°æ®ç»“æ„å¯¹æ¯”
```javascript
// æ–°pollç»“æ„
{
  content: {
    options: ["é€‰é¡¹1", "é€‰é¡¹2", "é€‰é¡¹3"],
    instructions: "pollé—®é¢˜æ–‡æœ¬",
    allowMultiple: false
  }
}

// æ—§pollç»“æ„ï¼ˆå…¼å®¹ï¼‰
{
  content: {
    questions: [{
      text: "pollé—®é¢˜æ–‡æœ¬",
      options: ["é€‰é¡¹1", "é€‰é¡¹2", "é€‰é¡¹3"],
      type: "radio"
    }]
  }
}
```

### ä¿®å¤çš„å…³é”®ä»£ç 
- `src/app/(dashboard)/activities/create/page.tsx` - Pollæ´»åŠ¨åˆ›å»ºé€»è¾‘
- `src/app/(dashboard)/student/activities/[id]/participate/page.tsx` - å­¦ç”Ÿå‚ä¸é€»è¾‘
- `server.js` - SocketæœåŠ¡å™¨è°ƒè¯•ä¿¡æ¯
